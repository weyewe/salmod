$(document).ready(function(){
	
	// if category creation is successful, append that category
	// show growl notification 
	
	var $form = $('#new_object'); 
	$form.spin(false);
	
	<% new_form = escape_javascript(  render :partial => "categories/new_object_form", :locals => {
    :new_object => @new_object , 
		:url => categories_url
  })%>


	$form.replaceWith('<%= new_form %>');

	<% if @object.valid? %>
		// show the growl. save. done. 
		<% new_entry = escape_javascript(  render :partial => "categories/entry", :locals => {
	    :object => @object  
	  })%>
		$("#tableview tbody").prepend('<%= new_entry %>');
		
		$.msgbox("Category <b><%= @object.name %></b> is created.", 
					{type: "info"});
	<% else %>
		 $.msgbox("Fail to create new category.", 
					{type: "error"});
	<% end %>
	
	// else, display error.. 
	jQuery('.prevent_double_submit').preventDoubleSubmit();
});